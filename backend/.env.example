# Myk Raws Legal RAG Backend Environment Configuration
# Copy this file to .env and fill in your actual values

# ===== APPLICATION =====
APP_NAME="Myk Raws Legal RAG"
VERSION="1.0.0"
ENVIRONMENT="production"  # development | staging | production
DEBUG=false

# ===== SECURITY =====
# Generate with: openssl rand -hex 32
SECRET_KEY="your-secret-key-here-min-32-characters"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# ===== DATABASE =====
DATABASE_URL="postgresql://username:password@localhost:5432/mykraws_legal"
# For production, use:
# DATABASE_URL="postgresql://username:password@your-server.com:5432/mykraws_legal"

# ===== OPENAI =====
OPENAI_API_KEY="sk-your-openai-api-key-here"
OPENAI_MODEL="gpt-4-turbo-preview"
OPENAI_EMBEDDING_MODEL="text-embedding-3-large"
OPENAI_MAX_TOKENS=3000
OPENAI_TEMPERATURE=0.1

# ===== CORS =====
CORS_ORIGINS="https://app.mykraws.com,https://mykraws.netlify.app,http://localhost:3000"

# ===== RETRIEVAL SETTINGS =====
RETRIEVAL_TOP_K=10
RETRIEVAL_HYBRID_ALPHA=0.5
RETRIEVAL_MAX_INTERPRETIVE_CASES=3
RETRIEVAL_SYNTHETIC_BOOST=0.7

# ===== INTERPRETATION LINK BOOST FACTORS =====
INTERPRETATION_BOOST_BINDING=3.0
INTERPRETATION_BOOST_PERSUASIVE=2.0
INTERPRETATION_BOOST_OBITER=1.5
INTERPRETATION_BOOST_DISSENT=1.2

# ===== DATA PATHS =====
FAISS_INDEX_PATH="./data/faiss/legal_paragraphs.index"
FAISS_MAPPING_PATH="./data/faiss/doc_id_mapping.json"
INTERPRETATION_LINKS_PATH="./data/interpretation_links.json"

# ===== LOGGING =====
LOG_LEVEL="INFO"  # DEBUG | INFO | WARNING | ERROR
LOG_FORMAT="json"  # json | text

# ===== RATE LIMITING =====
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=20
RATE_LIMIT_REQUESTS_PER_HOUR=100

# ===== QUALITY THRESHOLDS =====
MIN_SYNTHESIS_QUALITY_SCORE=0.8
MAX_HALLUCINATION_RATE=0.05
MIN_CITATION_PRECISION=0.95

# ===== FEATURES =====
ENABLE_LEPARD_CLASSIFICATION=true
ENABLE_INTERPRETATION_LINKS=true
ENABLE_HYBRID_RETRIEVAL=true
ENABLE_QUERY_REWRITING=true

# ===== MONITORING (Optional) =====
SENTRY_DSN=""  # Optional: Sentry error tracking
ENABLE_METRICS=true

# ===== SERVER =====
HOST="0.0.0.0"
PORT=8000
WORKERS=4  # Number of Uvicorn workers
